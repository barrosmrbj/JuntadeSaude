<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">

    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Ficha de Inspeção - HAMN</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="css/estilo.css">
</head>

<body>
    <!--<header class="titulo-centro">
        <img src="/img/hamn.webp" alt="Logo HAMN" style="width: 80px;">
        <h2>Ficha de Inspeção de Saúde</h2>
    </header>-->
    <div id="tela-consulta">
        <nav class="navbar navbar-dark bg-dark shadow-sm header-fixo">
            <img src="/img/hamn.webp" alt="Logo HAMN" class="logo-header">
            <span class="titulo-header">JUNTA DE SAÚDE - AppWeb Versão 1.0</span>
        </nav>
        
        <div class="container">
            <div class="header-fichas" style="text-align: center; margin-bottom: 20px;"></div>
            <div class="linha-campo linha-campo-cpf" style="max-width: 400px; margin: 0 auto 20px;">
                <label for="CampoCPF">CPF (Inspecionando)</label>
                <input id="CampoCPF" type="text" maxlength="11" readonly class="input-desabilitado">
            </div>
            <button type="button" class="btn-sistema" onclick="cancelarEReiniciar()">
                <i class="fas fa-times"></i> CANCELAR E VOLTAR
            </button>
        </div>

        <div id="statusMsg" style="display:none; text-align:center;">
            <div class="spinner"></div> Processando...
        </div>

        <div id="wizardContainer" style="display:none; opacity:0; transition: opacity 0.5s;">
            <div class="wizard-steps-container">
                <div class="step-indicators" id="stepIndicators">
                    <div class="step-item active" id="step1-ind">
                        <div class="step-circle">1</div>
                        <span class="step-label">Dados</span>
                    </div>
                    <div class="step-line"></div>
                    <div class="step-item" id="step2-ind">
                        <div class="step-circle">2</div>
                        <span class="step-label">GP / Final</span>
                    </div>
                    <div class="step-line"></div>
                    <div class="step-item" id="step3-ind">
                        <div class="step-circle">3</div>
                        <span class="step-label">Restrição</span>
                    </div>
                    <div class="step-line"></div>
                    <div class="step-item" id="step4-ind">
                        <div class="step-circle">4</div>
                        <span class="step-label">Curso</span>
                    </div>
                    <div class="step-line"></div>
                    <div class="step-item" id="step5-ind">
                        <div class="step-circle">5</div>
                        <span class="step-label">Concluir</span>
                    </div>
                </div>
            </div>

            <!-- STEP 1 - DADOS (visualização dos dados retornados) -->
            <div id="step-1" class="wizard-step" style="opacity: 1; display: block;">
                <div id="resultadoConsulta"></div>
                <div class="wizard-buttons">
                    <button class="btn-sistema btn-voltar" id="btnEdicao" onclick="EdicaoInspecionando()">Editar
                        Cadastro</button>
                    <button class="btn-sistema btn-secundario" id="toStep2" onclick="goToStep(2)">Continuar</button>
                </div>
            </div>

            <!-- STEP 2 - GP/FINAL -->
            <div id="step-2" class="wizard-step" style="display:none;">
                <div class="resultado-card">
                    <h3>Grupo e Finalidade</h3>

                    <div class="grupo-container">
                        <label><strong>Grupo (selecione 1)</strong></label>
                        <select id="selectGrupo">
                            <option value="">-- selecione --</option>
                        </select>
                    </div>

                    <!-- BADGES DAS FINALIDADES SELECIONADAS -->
                    <div id="finalidadesSelecionadasBox" style="margin: 10px 0; display:flex; gap:8px; flex-wrap:wrap;">
                    </div>

                    <div style="margin-top:10px;">
                        <label><strong>Finalidade (máx. 3)</strong></label>
                        <div id="finalidadeList" style="margin-top:6px; max-height:220px; overflow:auto;"></div>
                    </div>

                </div>

                <div class="wizard-buttons">
                    <button class="btn-sistema btn-secundario" onclick="goToStep(1)">Anterior</button>
                    <button class="btn-sistema" onclick="goToStep(3)">Próximo</button>
                </div>
            </div>


            <!--  -------------------------------------------- STEP 3 - JSS -------------------------------------------- -->

            <div id="step-3" class="wizard-step" style="display:none;">
                <div class="resultado-card">
                    <h3>Restrições Médicas - Clínica</h3>

                    <div class="campo-grupo">
                        <label><strong>Clínica da Restrição:</strong></label>
                        <input type="text" id="clinica_restricao" class="form-control"
                            placeholder="Ex: Ortopedia, Oftalmologia...">
                    </div>

                    <div class="campo-grupo" style="margin-top:15px;">
                        <label><strong>Data Início Restrição:</strong></label>
                        <textarea id="desc_restricao" class="form-control" rows="4"
                            placeholder="Ex: desde 01/01/2025"></textarea>
                    </div>

                </div>

                <div class="wizard-buttons">
                    <button class="btn-sistema btn-secundario" onclick="goToStep(2)">Anterior</button>
                    <button class="btn-sistema" onclick="goToStep(4)">Próximo</button>
                </div>
            </div>



            <!--  -------------------------------------------- STEP 4 - CURSO -------------------------------------------- -->
            <div id="step-4" class="wizard-step" style="display:none;">
                <div class="resultado-card">
                    <h3>Informações do Curso</h3>

                    <div class="campo-grupo">
                        <label><strong>Nome do Curso:</strong></label>
                        <input type="text" id="nome_curso" class="form-control"
                            placeholder="Ex: PARASAR, COMANDO e etc...">
                    </div>

                    <div class="campo-grupo" style="margin-top:15px;">
                        <label><strong>Período do Curso:</strong></label>
                        <input id="data_curso" type="text" class="form-control" placeholder="Ex: 01/2025 - 06/2025">
                    </div>
                </div>

                <div class="wizard-buttons">
                    <button class="btn-sistema btn-secundario" onclick="goToStep(getPreviousStep())">Anterior</button>
                    <button class="btn-sistema" onclick="goToStep(5)">Próximo</button>
                </div>
            </div>


            <!--  -------------------------------------------- STEP 5 - CONCLUIR -------------------------------------------- -->
            <div id="step-5" class="wizard-step" style="display:none;">
                <div class="resultado-card">
                    <h3>Seção de Consentimento</h3>
                    <div style="margin-bottom:15px; line-height: 1.6;">
                        <p>Ao prosseguir para o preenchimento, o(a) inspecionando(a)/usuário(a):</p>
                        <ul class="lista-consentimento" style="margin-left: 20px; margin-bottom: 20px;">
                            <li>Declara estar plenamente ciente do propósito desta coleta de dados.</li>
                            <li>Autoriza o tratamento dos seus dados pelo HAMN exclusivamente para as finalidades
                                descritas.</li>
                            <li>Compromete-se a utilizar este formulário de forma ética e verdadeira.</li>
                        </ul>
                    </div>

                    <div
                        style="background: #f0f4f8; padding: 15px; border-radius: 8px; border: 1px solid #d1d9e0; display: flex; align-items: center; justify-content: center; margin: 20px auto; max-width: 500px;">
                        <input type="checkbox" id="consentCheckbox" style="width: 20px; height: 20px; cursor: pointer;">
                        <label for="consentCheckbox"
                            style="cursor:pointer; margin-left:12px; font-weight: bold; color: #2c3e50;">
                            Li e concordo com os termos acima.
                        </label>
                    </div>
                </div>

                <div class="wizard-buttons" style="margin-top: 20px;">
                    <button class="btn-sistema btn-secundario" onclick="goToStep(getPreviousStep())">Anterior</button>
                    <button class="btn-sistema btn-sucesso" id="btnSalvarFinal" onclick="salvarFichaCompleta()"
                        disabled>
                        <i class="fas fa-save"></i> Salvar Ficha Final
                    </button>
                </div>

            </div>
        </div>
        <footer>
            <div class="container text-center">
                Copyright © 2025 Developed by Sgt Barros - Junta de Saúde do HAMN.
            </div>
        </footer>
    </div>

    <script src="js/script_ficha.js"></script>
    <script src="js/script_ficha_wizard.js"></script>
</body>

</html>